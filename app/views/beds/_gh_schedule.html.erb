
<table>
  <h1>Greenhouse Schedule<h2>
  <tr>
    <th>Bed</th>
    <th>Crop</th>
    <th>Family</th>
    <th><%= @first_day %></th>
    <% (@first_day...(@last_day+30)).each do |day| %>
        <% @next ||= @first_day %>
        <th><%= @next = @next += 1 %></th>
    <% end %>
    <% @next = @first_day -1.day %>
  </tr>

   <% @beds.each do |bed| %>
      <% next if bed.greenhouse_start == nil %>
      <% @crop = current_user.crops.find(bed.crop_id) %>
          <tr>
            <td><%= bed.bed %></td>
            <td><%= @crop.crop %></td> 
            <td><%= @crop.family %></td> 
            <% (@first_day...(@last_day+30)).each do |day| %>
              <% @next ||= @first_day %>
              <% @next = @next + 1.day %>
              <% if bed.greenhouse_start == @next or bed.greenhouse_end == @next %>
                <td><small><%= @crop.crop %></small></td>
              <% else %>
                <td><%= @dash %></td>
              <% end %>
          
            <% end %>

          <% @next = @first_day - 1.day %>

            
          <tr> 
    <% end %>
</table>


